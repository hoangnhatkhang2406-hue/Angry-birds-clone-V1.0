<!DOCTYPE html>
<html>
<head>
    <title>Angry Birds Clone</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
    <style>
        body { margin: 0; padding: 0; overflow: hidden; background: #87CEEB; }
        canvas { display: block; }
    </style>
</head>
<body>
<script>
    const { Engine, Render, Runner, Bodies, Composite, Constraint, MouseConstraint, Mouse } = Matter;

    const engine = Engine.create();
    const render = Render.create({
        element: document.body,
        engine: engine,
        options: { width: window.innerWidth, height: window.innerHeight, wireframes: false, background: 'transparent' }
    });

    // Tạo sàn và chim
    const ground = Bodies.rectangle(window.innerWidth/2, window.innerHeight - 20, window.innerWidth, 60, { isStatic: true, render: { fillStyle: '#2ecc71' } });
    const bird = Bodies.circle(200, window.innerHeight - 150, 20, { density: 0.004, render: { fillStyle: '#e74c3c' } });
    
    // Tạo ná cao su
    const sling = Constraint.create({ pointA: { x: 200, y: window.innerHeight - 150 }, bodyB: bird, stiffness: 0.05, length: 1 });

    // Tạo mục tiêu (thùng gỗ)
    const box1 = Bodies.rectangle(window.innerWidth - 200, window.innerHeight - 80, 50, 50, { render: { fillStyle: '#f39c12' } });
    const box2 = Bodies.rectangle(window.innerWidth - 200, window.innerHeight - 130, 50, 50, { render: { fillStyle: '#f39c12' } });

    const mouse = Mouse.create(render.canvas);
    const mouseConstraint = MouseConstraint.create(engine, { mouse: mouse });

    Composite.add(engine.world, [ground, bird, sling, box1, box2, mouseConstraint]);
    Render.run(render);
    Runner.run(Runner.create(), engine);

    let firing = false;
    Matter.Events.on(mouseConstraint, 'enddrag', (e) => { if(e.body === bird) firing = true; });
    Matter.Events.on(engine, 'afterUpdate', () => {
        if (firing && bird.position.x > 220) {
            sling.bodyB = null;
            firing = false;
        }
    });
</script>
</body>
</html>
